# 管理界面使用指南

本文档介绍如何使用域名配置管理系统的 Web 管理界面。

## 📋 目录

- [快速开始](#快速开始)
- [功能说明](#功能说明)
- [配置管理密码](#配置管理密码)
- [使用教程](#使用教程)
- [安全建议](#安全建议)

## 🚀 快速开始

### 1. 配置管理密码

在 `.env` 文件中设置管理密码：

```bash
# 管理界面配置
ADMIN_PASSWORD=your_secure_password_here
```

**重要**: 请使用强密码，不要使用默认密码 `admin123`！

### 2. 启动服务

```bash
# 开发环境
npm run dev

# 生产环境
npm start
```

### 3. 访问管理界面

打开浏览器访问：

```
http://localhost:3000/admin.html
```

### 4. 登录

输入你在 `.env` 文件中配置的管理密码，点击"登录"。

## 🎯 功能说明

### 主要功能

1. **域名列表查看**
   - 显示所有域名配置
   - 支持分页浏览
   - 显示域名的基本信息和权限状态

2. **搜索功能**
   - 实时搜索域名
   - 支持按域名和标题搜索

3. **添加域名**
   - 填写域名基本信息
   - 配置权限选项
   - 设置链接和高级权限

4. **编辑域名**
   - 修改域名配置
   - 更新权限设置
   - 编辑 JSON 配置

5. **删除域名**
   - 删除不需要的域名配置
   - 需要确认操作

## 🔐 配置管理密码

### 方法 1: 环境变量文件

编辑 `.env` 文件：

```bash
ADMIN_PASSWORD=MySecurePassword123!
```

### 方法 2: Docker Compose

在 `docker-compose.yml` 中配置：

```yaml
services:
  app:
    environment:
      - ADMIN_PASSWORD=MySecurePassword123!
```

### 方法 3: 系统环境变量

```bash
export ADMIN_PASSWORD=MySecurePassword123!
npm start
```

### 密码要求建议

- 长度至少 12 个字符
- 包含大小写字母、数字和特殊字符
- 不要使用常见密码或个人信息
- 定期更换密码

## 📖 使用教程

### 添加新域名

1. 点击右上角的 "➕ 添加域名" 按钮
2. 填写域名信息：
   - **域名** (必填): 例如 `example.com`
   - **标题**: 网站标题
   - **作者**: 作者名称
   - **描述**: 网站描述
   - **关键词**: 用逗号分隔的关键词

3. 配置权限：
   - ✅ **读取权限**: 允许读取数据
   - ✅ **写入权限**: 允许写入数据
   - ✅ **管理员权限**: 管理员级别权限
   - ✅ **评论功能**: 启用评论
   - ✅ **上传功能**: 启用文件上传
   - ✅ **API访问**: 允许 API 访问

4. 配置链接 (可选):
   ```json
   {
     "home": "https://example.com",
     "api": "https://api.example.com"
   }
   ```

5. 高级权限配置 (可选):
   ```json
   {
     "roles": ["viewer", "editor"],
     "restrictions": {
       "max_requests_per_day": 1000
     }
   }
   ```

6. 点击 "保存" 按钮

### 编辑域名

1. 在域名列表中找到要编辑的域名
2. 点击 "编辑" 按钮
3. 修改需要更改的信息
4. 点击 "保存" 按钮

**注意**: 域名字段在编辑时不可修改

### 删除域名

1. 在域名列表中找到要删除的域名
2. 点击 "删除" 按钮
3. 在确认对话框中点击 "确定"

**警告**: 删除操作不可恢复，请谨慎操作！

### 搜索域名

在搜索框中输入关键词，系统会实时过滤显示匹配的域名。

### 分页浏览

- 使用底部的分页按钮浏览不同页面
- 点击 "上一页" 或 "下一页"
- 或直接点击页码跳转

## 🔒 安全建议

### 1. 密码安全

- ✅ 使用强密码
- ✅ 定期更换密码
- ✅ 不要在代码中硬编码密码
- ✅ 不要将 `.env` 文件提交到版本控制

### 2. 访问控制

建议在生产环境中：

- 使用 HTTPS 协议
- 限制管理界面的访问 IP
- 使用反向代理（如 Nginx）添加额外的认证层
- 启用防火墙规则

### 3. Nginx 配置示例

```nginx
location /admin.html {
    # IP 白名单
    allow 192.168.1.0/24;
    deny all;
    
    # 基本认证（额外保护层）
    auth_basic "Admin Area";
    auth_basic_user_file /etc/nginx/.htpasswd;
    
    proxy_pass http://localhost:3000;
}
```

### 4. 防火墙规则

```bash
# 只允许特定 IP 访问 3000 端口
sudo ufw allow from 192.168.1.0/24 to any port 3000
```

### 5. 日志监控

定期检查访问日志，监控异常登录尝试：

```bash
# 查看应用日志
tail -f logs/app.log

# 查看错误日志
tail -f logs/app.error.log
```

## 🎨 界面说明

### 登录界面

- 简洁的登录表单
- 密码输入框
- 错误提示

### 主界面

- **顶部导航栏**: 显示系统标题和退出按钮
- **工具栏**: 搜索框和添加按钮
- **数据表格**: 显示域名列表
- **分页控件**: 底部分页导航

### 模态框

- **添加/编辑表单**: 完整的域名配置表单
- **权限配置**: 可视化的权限选择
- **JSON 编辑器**: 高级配置编辑

## 🐛 故障排查

### 问题 1: 无法登录

**可能原因**:
- 密码错误
- 环境变量未正确设置
- 服务未启动

**解决方案**:
1. 检查 `.env` 文件中的 `ADMIN_PASSWORD`
2. 重启服务
3. 查看控制台错误信息

### 问题 2: 无法加载域名列表

**可能原因**:
- 数据库连接失败
- API 服务未启动
- 网络问题

**解决方案**:
1. 检查数据库连接
2. 查看浏览器控制台错误
3. 检查 API 服务状态

### 问题 3: JSON 格式错误

**可能原因**:
- JSON 语法错误
- 缺少引号或逗号

**解决方案**:
1. 使用 JSON 验证工具检查格式
2. 确保所有字符串使用双引号
3. 检查括号和逗号是否匹配

## 📱 移动端支持

管理界面支持响应式设计，可以在移动设备上使用：

- 自适应布局
- 触摸友好的按钮
- 优化的表单输入

## 🔄 更新日志

### v1.0.0 (2026-01-24)

- ✨ 初始版本发布
- ✅ 基本的 CRUD 功能
- ✅ 权限配置界面
- ✅ 搜索和分页
- ✅ 密码认证

## 📚 相关文档

- [权限配置指南](./PERMISSIONS_GUIDE.md)
- [数据库迁移指南](../migrations/README.md)
- [API 文档](./API.md)

## 💡 提示

1. **备份数据**: 在进行批量操作前，建议先备份数据库
2. **测试环境**: 先在测试环境验证配置，再应用到生产环境
3. **权限最小化**: 只授予必要的权限
4. **定期审计**: 定期检查域名配置和权限设置

## 🆘 获取帮助

如有问题或建议，请：

1. 查看本文档的故障排查部分
2. 查看应用日志文件
3. 联系开发团队
4. 提交 Issue

---

**安全提醒**: 管理界面具有完全的数据操作权限，请妥善保管管理密码，不要与他人分享！
